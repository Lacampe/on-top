<div class="container-competition-table">
    <% round_number = 1 %>
    <% until round_number - 1 == @rounds do %>
    <div class=<%= "flex-" + "#{2 * @rounds - 1}" %>>
      <% @competition.matches.order("match_number asc").select { |r| r.round == round_number }.each do |match| %>
      <div class="card-match" id=<% if match.played? %>
        <%= "card-played" %>
        <% else %>
        <%= "#{match.match_number}" %>
        <% end %>>
        <% if match.played? %>
        <%= render "matches/final_score_#{@competition.sport.name.downcase}", match: match %>
        <% else %>
        <p><%= match.players.first.first_name if match.players.first %> vs. <%= match.players.last.first_name if match.players.last != match.players.first %> </p>
        <% if current_user == @competition.creator %>
        <%= link_to "Input Score", edit_match_path(match), class: 'btn btn-sm result-input-btn', 'data-toggle' => 'modal', 'data-target' => "##{match.match_number}_link" %>
        <% elsif current_user == match.players.first || current_user == match.players.last %>
        <%= link_to "Input Score", edit_match_path(match), class: 'btn btn-sm result-input-btn', 'data-toggle' => 'modal', 'data-target' => "##{match.match_number}_link" %>
        <% else %>
        <p><em><%= match.status %></em></p>
        <% end %>
        <%= render 'matches/edit', match: match %>
        <% end %>
      </div>

      <%= render 'champion', match: match if match.played? && round_number == @rounds %>
      <% end %>
    </div>
    <% round_number += 1 %>
    <% end %>
  </div>
